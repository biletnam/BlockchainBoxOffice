# 区块链票房设计

## 链上的角色及用例
```
{
	电影资金办：登记影院、登记售票平台、分账
	影院：登记影厅信息、排片、核对票根
	售票平台：锁定电影票

	游客：查询电影票、查看排片信息
}
```


## 数据模型
### 电影院
```
{
	影院名称
	所属院线
}
```

### 票务平台
```
{
	平台名称
}
```

### 影厅
```
{
	影院名称
	影厅名称
	座位（二维int数组）
}
```

### 排片
```
{
	排片编号
	电影名称
	所在影院
	所在影厅
	排片时间
	开始时间
	结束时间
}
```

### 电影票
```
{
	排片编号
	票编号
	座位排
	座位号
	-- u
	是否已锁定
	锁定价格
	锁定时间
	-- u
	是否已核对
	是否已分账
}
```

## 流程（接口）
### 登记影院
```
{
	参数：影院名称 所属院线 
	返回值：bool
}
```

### 登记售票平台
```
{
	参数：平台名称
	返回值：bool
}
```

### 登记影厅信息
```
{
	参数：影院名称 影厅名称 座位（二维int数组）
	返回值：bool	
}
```

### 排片
```
{
	参数：排片编号 电影名称 所在影院 所在影厅 排片时间 开始时间 结束时间
	返回值：bool
	合约逻辑：根据座位生成对应电影票（初始化电影票参数：排片编号 座位排 座位号）
}
```

### 核对票根
```
{
	参数：票编号
	返回值：bool
}
```

### 锁定电影票
```
{
	参数：票编号 价格
	返回值：bool
}
```

### 查询电影票
```
{
	参数：票编号
	返回值：电影票模型（全部字段）
}
```

### 查看排片信息
```
{
	参数：无（即返回所有排片）
	返回：排片富模型（即包含其电影票集合）
}
```

### 分账
```
{
	参数：电影名称
	返回值：
		发行总数
		锁定总数
		核对总数
		总票房
		资金办分账（8.3% * 总票房）
		可分账金额（91.7% * 总票房）
		影院分账	（50% * 可分账金额）
		院线分账	（7% * 可分账金额）
		发行分账	（43% * 可分账金额）	
}
```






